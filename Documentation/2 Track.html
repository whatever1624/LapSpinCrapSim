<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>2 Track</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

/* Override strong tags inside headings to maintain consistent weight */
h1 strong,
h2 strong,
h3 strong {
	font-weight: 600;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 10px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.collection-content td {
	white-space: pre-wrap;
	word-break: break-word;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	padding-inline-start: 0;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.page-description {
	margin-bottom: 2em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.callout img.notion-static-icon {
	width: 1em;
	height: 1em;
}

.callout p {
	margin: 0;
}

.callout h1,
.callout h2,
.callout h3 {
	margin: 0 0 0.6rem;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

blockquote.quote-large {
	font-size: 1.25em;
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI Variable Display", "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(44, 44, 43, 1);
}
.highlight-gray {
	color: rgba(125, 122, 117, 1);
	fill: rgba(125, 122, 117, 1);
}
.highlight-brown {
	color: rgba(159, 118, 90, 1);
	fill: rgba(159, 118, 90, 1);
}
.highlight-orange {
	color: rgba(210, 123, 45, 1);
	fill: rgba(210, 123, 45, 1);
}
.highlight-yellow {
	color: rgba(203, 148, 52, 1);
	fill: rgba(203, 148, 52, 1);
}
.highlight-teal {
	color: rgba(80, 148, 110, 1);
	fill: rgba(80, 148, 110, 1);
}
.highlight-blue {
	color: rgba(56, 125, 201, 1);
	fill: rgba(56, 125, 201, 1);
}
.highlight-purple {
	color: rgba(154, 107, 180, 1);
	fill: rgba(154, 107, 180, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(207, 81, 72, 1);
	fill: rgba(207, 81, 72, 1);
}
.highlight-default_background {
	color: rgba(44, 44, 43, 1);
}
.highlight-gray_background {
	background: rgba(42, 28, 0, 0.07);
}
.highlight-brown_background {
	background: rgba(139, 46, 0, 0.086);
}
.highlight-orange_background {
	background: rgba(224, 101, 1, 0.129);
}
.highlight-yellow_background {
	background: rgba(211, 168, 0, 0.137);
}
.highlight-teal_background {
	background: rgba(0, 100, 45, 0.09);
}
.highlight-blue_background {
	background: rgba(0, 124, 215, 0.094);
}
.highlight-purple_background {
	background: rgba(102, 0, 178, 0.078);
}
.highlight-pink_background {
	background: rgba(197, 0, 93, 0.086);
}
.highlight-red_background {
	background: rgba(223, 22, 0, 0.094);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(125, 122, 117, 1);
	fill: rgba(125, 122, 117, 1);
}
.block-color-brown {
	color: rgba(159, 118, 90, 1);
	fill: rgba(159, 118, 90, 1);
}
.block-color-orange {
	color: rgba(210, 123, 45, 1);
	fill: rgba(210, 123, 45, 1);
}
.block-color-yellow {
	color: rgba(203, 148, 52, 1);
	fill: rgba(203, 148, 52, 1);
}
.block-color-teal {
	color: rgba(80, 148, 110, 1);
	fill: rgba(80, 148, 110, 1);
}
.block-color-blue {
	color: rgba(56, 125, 201, 1);
	fill: rgba(56, 125, 201, 1);
}
.block-color-purple {
	color: rgba(154, 107, 180, 1);
	fill: rgba(154, 107, 180, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(207, 81, 72, 1);
	fill: rgba(207, 81, 72, 1);
}
.block-color-default_background {
	color: inherit;
	fill: inherit;
}
.block-color-gray_background {
	background: rgba(240, 239, 237, 1);
}
.block-color-brown_background {
	background: rgba(245, 237, 233, 1);
}
.block-color-orange_background {
	background: rgba(251, 235, 222, 1);
}
.block-color-yellow_background {
	background: rgba(249, 243, 220, 1);
}
.block-color-teal_background {
	background: rgba(232, 241, 236, 1);
}
.block-color-blue_background {
	background: rgba(229, 242, 252, 1);
}
.block-color-purple_background {
	background: rgba(243, 235, 249, 1);
}
.block-color-pink_background {
	background: rgba(250, 233, 241, 1);
}
.block-color-red_background {
	background: rgba(252, 233, 231, 1);
}
.select-value-color-default { background-color: rgba(42, 28, 0, 0.07); }
.select-value-color-gray { background-color: rgba(28, 19, 1, 0.11); }
.select-value-color-brown { background-color: rgba(127, 51, 0, 0.156); }
.select-value-color-orange { background-color: rgba(196, 88, 0, 0.203); }
.select-value-color-yellow { background-color: rgba(209, 156, 0, 0.282); }
.select-value-color-green { background-color: rgba(0, 96, 38, 0.156); }
.select-value-color-blue { background-color: rgba(0, 118, 217, 0.203); }
.select-value-color-purple { background-color: rgba(92, 0, 163, 0.141); }
.select-value-color-pink { background-color: rgba(183, 0, 78, 0.152); }
.select-value-color-red { background-color: rgba(206, 24, 0, 0.164); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="2d4e66e2-bd3a-8026-ae52-c079d9cee20a" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">üèîÔ∏è</span></div><h1 class="page-title" dir="auto">2 Track</h1><p class="page-description" dir="auto"></p></header><div class="page-body"><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-805b-859b-e482d831470f" class="">The track module is responsible for defining the track on which a trajectory can be created and optimised - this includes the Track class, as well as the CoordinateArray, Event and Gate classes used to generate and define the track</p></div><div style="display:contents" dir="ltr"><nav id="2d4e66e2-bd3a-80f3-a48c-e78dcb3d3f9e" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-80be-b960-d7fdb8be3d60">CoordinateArray Class</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-80f2-b8ae-eebd60e3356e">Attributes</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d5e66e2-bd3a-8076-8c02-d91bf776c178">__init__()</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d5e66e2-bd3a-8022-bd07-f04420c341eb">getReducedCoordArray()</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-8000-9028-c36e2b3f81e9">Event Class</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-80ee-b89e-e02987eb37ac">Attributes</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d5e66e2-bd3a-8060-ba85-cad97fd8e79d">Event Types for Custom Events - NOT IMPLEMENTED YET</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d5e66e2-bd3a-8044-9639-dc7e9f2d9c40">Internal Event Types</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-8097-a6f2-d5fab85a39ef">Gate Class</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-807a-8948-c31ae4e1b926">Attributes</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-8035-bc6b-edd2b2ffaa75">__init__()</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d6e66e2-bd3a-801e-b303-ce12c5795dd9">calcDist()</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-801f-8f4b-cbe203029d0a">calcLimitSofts()</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-8019-8cc7-d7ec01b3a986">calcLimitHards()</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-80c5-ad97-c30181c0f985">updateWidths()</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d6e66e2-bd3a-80cb-874c-c7231fecd938">recalcMidpoint()</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-8044-8d7d-f002aa198d2c">Track Class</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d5e66e2-bd3a-80af-9553-e3c640df01bb">Attributes</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-80b7-959e-f16015e19903">__init__()</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-80d3-a497-c56c84db17aa">__initFromPkl()</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-80c0-b43e-ceb5d9b8e322">__initFromTrackGen()</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2d6e66e2-bd3a-8085-a483-cd4686d600bf">__initGateFromCoords()</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2d5e66e2-bd3a-804a-930a-cba263bbfa7d">__parseTrackFiles()</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2d5e66e2-bd3a-80ab-a1d4-efe8729a9108">__saveTrackPlot()</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2d4e66e2-bd3a-807c-8867-f6a9a5ae338a">Track Generation Logic</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d5e66e2-bd3a-804b-800d-d80716bd7a23">calcTrackZ()</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2d5e66e2-bd3a-80f6-b1f3-da0a01b52c25">calcTrackNormal()</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#2d5e66e2-bd3a-8079-bcfb-e5df9b7eed86">Calculation Logic</a></div></nav></div><div style="display:contents" dir="auto"><h1 id="2d4e66e2-bd3a-80be-b960-d7fdb8be3d60" class="">CoordinateArray Class</h1></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-8081-ab6d-e35c5f1f26b9" class="">Contains information about the coordinate array and its related functions, used during track generation</p></div><div style="display:contents" dir="auto"><h2 id="2d4e66e2-bd3a-80f2-b8ae-eebd60e3356e" class="">Attributes</h2></div><div style="display:contents" dir="ltr"><table id="2d4e66e2-bd3a-8079-8fba-fc04669739c4" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8046-960a-eeb069ad78c9"><td id="ztX&gt;" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="aF=g" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="enNK" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80f7-813b-cfae353df51c"><td id="ztX&gt;" class="" style="width:236.33333333333334px">xyzCoordArray</td><td id="aF=g" class="" style="width:236.33333333333334px">2D NumPy array of floats</td><td id="enNK" class="" style="width:236.33333333333334px">Coordinate array where each index is an [x, y, z] coordinate, and each subsequent index increases the distance along the track.</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-802c-bb00-c48c722f11d4"><td id="ztX&gt;" class="" style="width:236.33333333333334px">sCoords</td><td id="aF=g" class="" style="width:236.33333333333334px">NumPy array of floats</td><td id="enNK" class="" style="width:236.33333333333334px">Cumulative distance along the coordinates, calculated assuming straight lines between the coordinates</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-807f-ab20-f1b1c409c64d"><td id="ztX&gt;" class="" style="width:236.33333333333334px">AHeadings</td><td id="aF=g" class="" style="width:236.33333333333334px">NumPy array of floats</td><td id="enNK" class="" style="width:236.33333333333334px">(Unwrapped) heading angle along the coordinates, with 0 corresponding to positive y (north) and increasing clockwise</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-8049-9580-d5ad54b25b2c"><td id="ztX&gt;" class="" style="width:236.33333333333334px">AHeadingsFilt</td><td id="aF=g" class="" style="width:236.33333333333334px">NumPy array of floats</td><td id="enNK" class="" style="width:236.33333333333334px">Low-pass filtered AHeadings with cutoff frequency LP_FILT_SPATIAL_FREQ and order LP_FILT_ORDER, in the spatial domain</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80b0-8991-f64b52322f66"><td id="ztX&gt;" class="" style="width:236.33333333333334px">BClosedTrack</td><td id="aF=g" class="" style="width:236.33333333333334px">Boolean</td><td id="enNK" class="" style="width:236.33333333333334px">True if the coordinate array should be treated as being closed</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d5e66e2-bd3a-8076-8c02-d91bf776c178" class="">__init__()</h2></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8081-83c5-f18035be49ae" class="">Makes sure that the coordArray is closed if BClosedTrack is true (i.e. last coordinate == first coordinate), then calculates the sCoords and AHeadings arrays</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8029-8b63-cca0ea4965e1" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d5e66e2-bd3a-80d6-80ed-ec1c6230e67f" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-802c-a726-ec20524f2908"><td id="Eec:" class="" style="width:235.66666666666666px"><em>Name</em></td><td id="Gbkf" class="" style="width:235.66666666666666px"><em>Type</em></td><td id="`f\D" class="" style="width:235.66666666666666px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-807d-83ca-e65ae3918e5e"><td id="Eec:" class="" style="width:235.66666666666666px">coordArray</td><td id="Gbkf" class="" style="width:235.66666666666666px">2D NumPy array of floats</td><td id="`f\D" class="" style="width:235.66666666666666px">Coordinate array where each index is an [x, y, z] coordinate, and each subsequent index increases the distance along the track.</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80f8-b080-d5ba5486c6b2"><td id="Eec:" class="" style="width:235.66666666666666px">BClosedTrack</td><td id="Gbkf" class="" style="width:235.66666666666666px">Boolean</td><td id="`f\D" class="" style="width:235.66666666666666px">If true, the coordinate array will be treated as being closed<br/><br/>If false, the coordinate array will be treated as being open</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-802f-bfdd-f4c2fa9da811"><td id="Eec:" class="" style="width:235.66666666666666px">BAllowAHeadingNegativeInit</td><td id="Gbkf" class="" style="width:235.66666666666666px">Boolean</td><td id="`f\D" class="" style="width:235.66666666666666px">If true, will wrap the initial heading angle to the range from -pi to pi<br/><br/>If false, the initial heading angle will be in the range 0 to 2 pi<br/><br/>Note that this will be applied according to the low-pass filtered heading angle, then applied to the unfiltered heading angle<br/><br/>This is intended to ensure that even when the initial heading of the track is close to 0 (or 2 pi radians), AHeadings is consistent between CoordinateArray objects</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d5e66e2-bd3a-8022-bd07-f04420c341eb" class="">getReducedCoordArray()</h2></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80d6-bb16-f59b2e33523f" class="">Returns a coordinate array object with the arrays of attributes ‚Äúreduced‚Äù to only those within the specified window defined by cumulative distance and heading bounds</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-8052-83df-f3e09a7bc882" class="">Values on the bounds of the window are linearly interpolated</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-8012-b70a-f2b9f42aaf44" class="">If the track is not closed, and the distance and heading bounds dictate that the reduced coordinate array should extend beyond the defined coordinates, linearly extrapolates from the first/last low-pass filtered heading angle in AHeadings</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-8046-900f-ec226fa50e95" class="">Used during track generation for gate creation and track mesh creation</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-808c-abf2-e72dd9d87f92" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d6e66e2-bd3a-8022-86c5-f8a0ed643da5" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8010-9924-c172d6cd13c1"><td id="Eec:" class="" style="width:235.66666666666666px"><em>Name</em></td><td id="Gbkf" class="" style="width:235.66666666666666px"><em>Type</em></td><td id="`f\D" class="" style="width:235.66666666666666px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-801e-8d1e-e0f3db129571"><td id="Eec:" class="" style="width:235.66666666666666px">sLower</td><td id="Gbkf" class="" style="width:235.66666666666666px">Float</td><td id="`f\D" class="" style="width:235.66666666666666px">Lower bound for the cumulative distances along the coordinate array (i.e. lower bound of sCoords)</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8035-bd4c-f12f438bf64e"><td id="Eec:" class="" style="width:235.66666666666666px">sUpper</td><td id="Gbkf" class="" style="width:235.66666666666666px">Float</td><td id="`f\D" class="" style="width:235.66666666666666px">Upper bound for the cumulative distances along the coordinate array (i.e. upper bound of sCoords)</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-80a9-ac39-dd03b79f7639"><td id="Eec:" class="" style="width:235.66666666666666px">ALower</td><td id="Gbkf" class="" style="width:235.66666666666666px">Float</td><td id="`f\D" class="" style="width:235.66666666666666px">Lower bound for the low-pass filtered cumulative heading (i.e. lower bound of AHeadingsFilt)</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-808d-99a6-fcbee58d2efd"><td id="Eec:" class="" style="width:235.66666666666666px">AUpper</td><td id="Gbkf" class="" style="width:235.66666666666666px">Float</td><td id="`f\D" class="" style="width:235.66666666666666px">Upper bound for the low-pass filtered cumulative heading (i.e. upper bound of AHeadingsFilt)</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h1 id="2d4e66e2-bd3a-8000-9028-c36e2b3f81e9" class="">Event Class</h1></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-8093-8678-fe21158bfa38" class="">Contains information about the event gate</p></div><div style="display:contents" dir="auto"><h2 id="2d4e66e2-bd3a-80ee-b89e-e02987eb37ac" class="">Attributes</h2></div><div style="display:contents" dir="ltr"><table id="2d4e66e2-bd3a-80b3-8ab9-cd1f5face02b" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-807a-b548-f0f21b4d8c0e"><td id="MzMR" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="MlDq" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="H{fw" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80f4-bd56-fe1587b2fa7f"><td id="MzMR" class="" style="width:236.33333333333334px">name</td><td id="MlDq" class="" style="width:236.33333333333334px">String</td><td id="H{fw" class="" style="width:236.33333333333334px">Name of the event gates pair - note that there must be a start and finish gate for each event name</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80c7-91a7-fd1a18af2c13"><td id="MzMR" class="" style="width:236.33333333333334px">type</td><td id="MlDq" class="" style="width:236.33333333333334px">String</td><td id="H{fw" class="" style="width:236.33333333333334px">Event type - see below for the valid event types</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80c8-aca8-cffdb09870e4"><td id="MzMR" class="" style="width:236.33333333333334px">BStart</td><td id="MlDq" class="" style="width:236.33333333333334px">Boolean</td><td id="H{fw" class="" style="width:236.33333333333334px">Boolean whether this is the start gate (if false, means that this is the finish gate for the event)</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-8048-a4b2-da2d6fa97243"><td id="MzMR" class="" style="width:236.33333333333334px">properties</td><td id="MlDq" class="" style="width:236.33333333333334px">Dictionary</td><td id="H{fw" class="" style="width:236.33333333333334px">Dictionary of properties specific to the event type</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d5e66e2-bd3a-8060-ba85-cad97fd8e79d" class="">Event Types for Custom Events - NOT IMPLEMENTED YET</h2></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-808c-9d96-e1cf077b630c" class="">Event types and their specific properties available for defining custom events</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8051-ae30-d6b75a8815e0" class="bulleted-list"><li style="list-style-type:disc"><strong>DRS</strong> - </li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-805e-9cb1-db91cba14546" class="bulleted-list"><li style="list-style-type:disc"><strong>SLM</strong> - </li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8071-8fe5-f85e2e0c3dc8" class="bulleted-list"><li style="list-style-type:disc"><strong>SpeedLimiter</strong> - </li></ul></div><div style="display:contents" dir="auto"><h2 id="2d5e66e2-bd3a-8044-9639-dc7e9f2d9c40" class="">Internal Event Types</h2></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80a4-8d71-f87ddf7b7afb" class="">These are event types used during track generation, and are not valid event types for defining custom events</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-805c-bec3-c40f060f9c1f" class="bulleted-list"><li style="list-style-type:disc"><strong>GateCreation</strong> - First and final gates to mark when to begin and end gate creation for track generation</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8073-b382-fbfff4f7e52d" class="bulleted-list"><li style="list-style-type:disc"><strong>StartFinish</strong> - Start and finish gates for lap timing</li></ul></div><div style="display:contents" dir="auto"><h1 id="2d4e66e2-bd3a-8097-a6f2-d5fab85a39ef" class="">Gate Class</h1></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80d6-8ced-f2e7331fd3ef" class="">Contains information about the gate and its related functions</p></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80d7-8d26-ddf5d9194ad1" class="">The Gate object is represented only on the 2D plane [x, y] - otherwise handling intersections with track limits would be practically impossible</p></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80e3-bd82-f47f5ff6a586" class="">Note that with the gate, the midpoint attribute is not guaranteed to be the midpoint of the gate between the soft track limits due to the gate finding optimisation process, and the possibility of weird track limits making it impossible to make the gate midpoint be technically correct - and this is also why there are both lWidthLimitLeftSoft and lWidthLimitRightSoft variables</p></div><div style="display:contents" dir="auto"><h2 id="2d4e66e2-bd3a-807a-8948-c31ae4e1b926" class="">Attributes</h2></div><div style="display:contents" dir="ltr"><table id="2d4e66e2-bd3a-80d1-97a1-da35bbcb42bb" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80cc-8cfc-f72be725bf16"><td id="ztX&gt;" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="aF=g" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="enNK" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8085-a526-d3476f415285"><td id="ztX&gt;" class="" style="width:236.33333333333334px">line</td><td id="aF=g" class="" style="width:236.33333333333334px">Shapely LineString</td><td id="enNK" class="" style="width:236.33333333333334px">Straight line from left coordinate to right coordinate of the gate, only on the 2D plane [x, y]</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-809f-aae7-f5ff512ae886"><td id="ztX&gt;" class="" style="width:236.33333333333334px">xyMidpoint</td><td id="aF=g" class="" style="width:236.33333333333334px">NumPy array of floats</td><td id="enNK" class="" style="width:236.33333333333334px">Midpoint of the gate between the soft track limits, only on the 2D plane [x, y]</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80f0-a50f-e413750c1928"><td id="ztX&gt;" class="" style="width:236.33333333333334px">AHeading</td><td id="aF=g" class="" style="width:236.33333333333334px">Float</td><td id="enNK" class="" style="width:236.33333333333334px">Heading angle of the gate, with 0 corresponding to positive y (north) and increasing clockwise<br/><br/>This should be the unwrapped heading in the same rotation corresponding to the CoordinateArray objects</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-808e-954f-c5bb8a78fbf6"><td id="ztX&gt;" class="" style="width:236.33333333333334px">event</td><td id="aF=g" class="" style="width:236.33333333333334px">Event object or None</td><td id="enNK" class="" style="width:236.33333333333334px">If this is an Event object, then this gate is an event gate (and information about the event is in the Event object)<br/><br/>If this is None, then this gate is a regular gate</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8070-a5c5-e64fc7bb36c1"><td id="ztX&gt;" class="" style="width:236.33333333333334px">lLimitLeftSoft</td><td id="aF=g" class="" style="width:236.33333333333334px">Float or None</td><td id="enNK" class="" style="width:236.33333333333334px">Distance from the gate midpoint to the left soft track limit<br/><br/>Positive indicates the gate midpoint is within this track limit<br/><br/>Initialises to None unless otherwise set</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8010-8f65-c9ce44c82378"><td id="ztX&gt;" class="" style="width:236.33333333333334px">lLimitRightSoft</td><td id="aF=g" class="" style="width:236.33333333333334px">Float or None</td><td id="enNK" class="" style="width:236.33333333333334px">Distance from the gate midpoint to the right soft track limit<br/><br/>Positive indicates the gate midpoint is within this track limit<br/><br/>Initialises to None unless otherwise set</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80a5-bd4f-faacbc7d279b"><td id="ztX&gt;" class="" style="width:236.33333333333334px">lLimitLeftHard</td><td id="aF=g" class="" style="width:236.33333333333334px">Float or None</td><td id="enNK" class="" style="width:236.33333333333334px">Distance from the gate midpoint to the left hard track limit<br/><br/>Positive indicates the gate midpoint is within this track limit<br/><br/>Initialises to None unless otherwise set</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8067-925f-d9270c7cdae6"><td id="ztX&gt;" class="" style="width:236.33333333333334px">lLimitRightHard</td><td id="aF=g" class="" style="width:236.33333333333334px">Float or None</td><td id="enNK" class="" style="width:236.33333333333334px">Distance from the gate midpoint to the right hard track limit<br/><br/>Positive indicates the gate midpoint is within this track limit<br/><br/>Initialises to None unless otherwise set</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80d2-93d7-ffc41994a5d9"><td id="ztX&gt;" class="" style="width:236.33333333333334px">sLimitLeftSoft</td><td id="aF=g" class="" style="width:236.33333333333334px">Float</td><td id="enNK" class="" style="width:236.33333333333334px">Cumulative distance along the left soft track limit coordinate array of the intersection with the gate</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80ba-87e4-c97ea159731c"><td id="ztX&gt;" class="" style="width:236.33333333333334px">sLimitRightSoft</td><td id="aF=g" class="" style="width:236.33333333333334px">Float</td><td id="enNK" class="" style="width:236.33333333333334px">Cumulative distance along the right soft track limit coordinate array of the intersection with the gate</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-80b5-ac07-e248ac4084de"><td id="ztX&gt;" class="" style="width:236.33333333333334px">sLimitLeftHard</td><td id="aF=g" class="" style="width:236.33333333333334px">Float</td><td id="enNK" class="" style="width:236.33333333333334px">Cumulative distance along the left hard track limit coordinate array of the intersection with the gate</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-808a-af22-e957fa17e96a"><td id="ztX&gt;" class="" style="width:236.33333333333334px">sLimitRightHard</td><td id="aF=g" class="" style="width:236.33333333333334px">Float</td><td id="enNK" class="" style="width:236.33333333333334px">Cumulative distance along the right hard track limit coordinate array of the intersection with the gate</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d4e66e2-bd3a-8035-bc6b-edd2b2ffaa75" class="">__init__()</h2></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80be-9c26-ff242d13fef2" class="">Generates the gate line, either from midpoint coordinate and direction vector, or from left and right coordinates</p></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-8049-a2be-cfe1bab29c4a" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d4e66e2-bd3a-80b4-83ee-c93cdb67b105" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80a9-a7a6-c2eb015fd400"><td id="zWQB" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="A:\N" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80a6-9fa1-d9a41601c6d1"><td id="zWQB" class="" style="width:236.33333333333334px">xyMidpoint<br/><br/>*Optional, defaults to an empty array<br/><br/>*Initialisation requires either both xyMidpoint and xyDirection, or both xyLeft and xyRight</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">NumPy array of floats</td><td id="A:\N" class="" style="width:236.33333333333334px">Midpoint of the gate between the soft track limits, only on the 2D plane [x, y]</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8029-a797-df43e5d5ac47"><td id="zWQB" class="" style="width:236.33333333333334px">AHeading<br/><br/>*Optional, defaults to None<br/><br/>*Initialisation requires either both xyMidpoint and xyDirection, or both xyLeft and xyRight</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float or None</td><td id="A:\N" class="" style="width:236.33333333333334px">Heading angle of the gate, with 0 corresponding to positive y (north) and increasing clockwise<br/><br/>This should be the unwrapped heading in the same rotation corresponding to the CoordinateArray objects</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80f0-8262-feef2352db82"><td id="zWQB" class="" style="width:236.33333333333334px">xyLeft<br/><br/>*Optional, defaults to an empty array<br/><br/>*Initialisation requires either both xyMidpoint and xyDirection, or both xyLeft and xyRight</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">NumPy array of floats</td><td id="A:\N" class="" style="width:236.33333333333334px">Left coordinate of the gate, only on the 2D plane [x, y]</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80da-a04c-eb86a9cdef70"><td id="zWQB" class="" style="width:236.33333333333334px">xyRight<br/><br/>*Optional, defaults to an empty array<br/><br/>*Initialisation requires either both xyMidpoint and xyDirection, or both xyLeft and xyRight</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Numpy array of floats</td><td id="A:\N" class="" style="width:236.33333333333334px">Right coordinate of the gate, only on the 2D plane [x, y]</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8051-ba4b-c3436e3fcee8"><td id="zWQB" class="" style="width:236.33333333333334px">lLeft<br/><br/>*Optional, defaults to the constant GATE_MAX_WIDTH / 2</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float</td><td id="A:\N" class="" style="width:236.33333333333334px">Width of the gate to the left of the midpoint</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-807f-bdb9-d5fb06f6a920"><td id="zWQB" class="" style="width:236.33333333333334px">lRight<br/><br/>*Optional, defaults to the constant GATE_MAX_WIDTH / 2</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float</td><td id="A:\N" class="" style="width:236.33333333333334px">Width of the gate to the right of the midpoint</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8092-bf58-d188e3f1fb44"><td id="zWQB" class="" style="width:236.33333333333334px">lLimitLeftSoft<br/><br/>*Optional, defaults to None</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float or None</td><td id="A:\N" class="" style="width:236.33333333333334px">Distance from the gate midpoint to the left soft track limit<br/><br/>Positive indicates the gate midpoint is within this track limit</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80ae-87ce-c6b39c5597c6"><td id="zWQB" class="" style="width:236.33333333333334px">lLimitRightSoft<br/><br/>*Optional, defaults to None</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float or None</td><td id="A:\N" class="" style="width:236.33333333333334px">Distance from the gate midpoint to the right soft track limit<br/><br/>Positive indicates the gate midpoint is within this track limit</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-802f-a6b9-cc841ff87ceb"><td id="zWQB" class="" style="width:236.33333333333334px">lLimitLeftHard<br/><br/>*Optional, defaults to None</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float or None</td><td id="A:\N" class="" style="width:236.33333333333334px">Distance from the gate midpoint to the left hard track limit<br/><br/>Positive indicates the gate midpoint is within this track limit</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8064-96f6-e0a043adcf8f"><td id="zWQB" class="" style="width:236.33333333333334px">lLimitRightHard<br/><br/>*Optional, defaults to None</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float or None</td><td id="A:\N" class="" style="width:236.33333333333334px">Distance from the gate midpoint to the right hard track limit<br/><br/>Positive indicates the gate midpoint is within this track limit</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8094-a351-e9e5b0e288fd"><td id="zWQB" class="" style="width:236.33333333333334px">sLimitLeftSoft<br/><br/>*Optional, defaults to 0</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float</td><td id="A:\N" class="" style="width:236.33333333333334px">Cumulative distance along the left soft track limit coordinate array of the intersection with the gate</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-80ff-8a76-fdc1f2c3b4ae"><td id="zWQB" class="" style="width:236.33333333333334px">sLimitRightSoft<br/><br/>*Optional, defaults to 0</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float</td><td id="A:\N" class="" style="width:236.33333333333334px">Cumulative distance along the right soft track limit coordinate array of the intersection with the gate</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8088-83a7-e3af615eb352"><td id="zWQB" class="" style="width:236.33333333333334px">sLimitLeftHard<br/><br/>*Optional, defaults to 0</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float</td><td id="A:\N" class="" style="width:236.33333333333334px">Cumulative distance along the left hard track limit coordinate array of the intersection with the gate</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-80bc-82c3-dc19000f67a4"><td id="zWQB" class="" style="width:236.33333333333334px">sLimitRightHard<br/><br/>*Optional, defaults to 0</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Float</td><td id="A:\N" class="" style="width:236.33333333333334px">Cumulative distance along the right hard track limit coordinate array of the intersection with the gate</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d6e66e2-bd3a-801e-b303-ce12c5795dd9" class="">calcDist()</h2></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-80cf-b527-c9be9ad3b584" class="">Function to calculate the gate intersection with the reduced CoordinateArray object provided (reduced meaning local to the region around the gate), using Shapely distance() and project()</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-80fd-9d0d-c42be10d7b13" class="">Returns the tuple of (lLimitUnsigned, sLimit):</p></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-8086-b8f3-f21c161d28a4" class="bulleted-list"><li style="list-style-type:disc">lLimitUnsigned is the calculated (unsigned) distance from the gate midpoint to the CoordinateArray object (along the gate line)</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-8011-96a5-ce25c3326858" class="bulleted-list"><li style="list-style-type:disc">sLimit is the calculated cumulative distance along the CoordinateArray object of the intersection with the gate</li></ul></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-80e3-a4b3-e3b4fb5006fa" class="">If no intersection was found, returns lLimitUnsigned as <code>GATE_MAX_WIDTH / 2</code> and sLimit as 0</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-8088-bfad-f9f5c67a7072" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d6e66e2-bd3a-8042-ab5b-f44b46ae2724" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-80d7-9aac-fc638fe40604"><td id="jC?z" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="L\VC" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="T~|B" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8016-9efa-f1db035a10e5"><td id="jC?z" class="" style="width:236.33333333333334px">reducedLimit</td><td id="L\VC" class="" style="width:236.33333333333334px">CoordinateArray object</td><td id="T~|B" class="" style="width:236.33333333333334px">Reduced track limit CoordinateArray object for the local region around the gate</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d4e66e2-bd3a-801f-8f4b-cbe203029d0a" class="">calcLimitSofts()</h2></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-8053-b777-c62115a59870" class="">Calculates the gate intersection with the left and right soft track limits using the class function calcDist(), and using the Utils function sideOfLine() to make the distances to the track limit correctly signed</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-80ff-8bf6-eaa2e1ee2ff6" class="">Then updates the attributes with the calculated values for:</p></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-80ee-b0d0-eefcc043c3d1" class="bulleted-list"><li style="list-style-type:disc">lLimitLeftSoft</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-8084-8a22-f213726af2a9" class="bulleted-list"><li style="list-style-type:disc">lLimitRightSoft</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-8059-a1ee-d0adf491447d" class="bulleted-list"><li style="list-style-type:disc">sLimitLeftSoft</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-8031-9980-ca6f03acb472" class="bulleted-list"><li style="list-style-type:disc">sLimitRightSoft</li></ul></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-8086-9e0e-ef710305b90c" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d6e66e2-bd3a-8055-b884-e38a853462a4" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-80f3-98c5-fd33d9bc4299"><td id="jC?z" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="L\VC" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="T~|B" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8009-b19f-cea4d250c24b"><td id="jC?z" class="" style="width:236.33333333333334px">reducedLimitLeftSoft</td><td id="L\VC" class="" style="width:236.33333333333334px">CoordinateArray object</td><td id="T~|B" class="" style="width:236.33333333333334px">Reduced left soft track limit CoordinateArray object for the local region around the gate</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8061-a4d0-fb83ad5c9a4a"><td id="jC?z" class="" style="width:236.33333333333334px">reducedLimitRightSoft</td><td id="L\VC" class="" style="width:236.33333333333334px">CoordinateArray object</td><td id="T~|B" class="" style="width:236.33333333333334px">Reduced right soft track limit CoordinateArray object for the local region around the gate</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d4e66e2-bd3a-8019-8cc7-d7ec01b3a986" class="">calcLimitHards()</h2></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-806c-b3b1-e3cc78e05a72" class="">Calculates the gate intersection with the left and right hard track limits using the class function calcDist(), and using the Utils function sideOfLine() to make the distances to the track limit correctly signed</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-8059-84b8-e908b0d89223" class="">Then updates the attributes with the calculated values for:</p></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-806c-9915-f12505e17ebf" class="bulleted-list"><li style="list-style-type:disc">lLimitLeftHard</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-809b-aca8-dea53f7fefa1" class="bulleted-list"><li style="list-style-type:disc">lLimitRightHard</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-80fd-9b49-c75771d36623" class="bulleted-list"><li style="list-style-type:disc">sLimitLeftHard</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-80d4-84ef-d29230a7c9b6" class="bulleted-list"><li style="list-style-type:disc">sLimitRightHard</li></ul></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-80f9-8c75-f93ae5a1daa1" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d6e66e2-bd3a-80f9-b3fc-fcb25f182a38" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-80d7-b3e2-fff99a4a5ef0"><td id="jC?z" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="L\VC" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="T~|B" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-806a-be2d-f41c2eb385bf"><td id="jC?z" class="" style="width:236.33333333333334px">reducedLimitLeftHard</td><td id="L\VC" class="" style="width:236.33333333333334px">CoordinateArray object</td><td id="T~|B" class="" style="width:236.33333333333334px">Reduced left hard track limit CoordinateArray object for the local region around the gate</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8058-9465-f1398f32ac30"><td id="jC?z" class="" style="width:236.33333333333334px">reducedLimitRightHard</td><td id="L\VC" class="" style="width:236.33333333333334px">CoordinateArray object</td><td id="T~|B" class="" style="width:236.33333333333334px">Reduced right hard track limit CoordinateArray object for the local region around the gate</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d4e66e2-bd3a-80c5-ad97-c30181c0f985" class="">updateWidths()</h2></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80cd-8deb-ff7b055db787" class="">Updates the attributes lLeft and lRight, then calculates the new left and right coordinates of the gate and updates the gate line to be between these new coordinates</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8044-a31f-c07d06cb6448" class="">Raises an exception if the specified widths would be lower than the widths to the soft or hard limits, if they have been calculated</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-8012-9952-fff052f916f7" class="">Also raises an exception if the specified widths would result in a gate wider than GATE_MAX_WIDTH</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8018-b04a-ef6730354f51" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d5e66e2-bd3a-809b-bbff-e5d6a2bb957e" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80d6-aa1c-fecabf3a2a4c"><td id="jC?z" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="L\VC" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="T~|B" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-806b-b14c-dc2bb837f9d3"><td id="jC?z" class="" style="width:236.33333333333334px">lLeft<br/><br/>*Optional, default to None</td><td id="L\VC" class="" style="width:236.33333333333334px">Float</td><td id="T~|B" class="" style="width:236.33333333333334px">New left width of the gate<br/><br/>If None, asserts that lLimitLeftHard exists, then uses <code>lLimitLeftHard + GATE_EXTEND_WIDTH</code></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-8064-a5d3-eaa690e07bd3"><td id="jC?z" class="" style="width:236.33333333333334px">lRight<br/><br/>*Optional, default to None</td><td id="L\VC" class="" style="width:236.33333333333334px">Float</td><td id="T~|B" class="" style="width:236.33333333333334px">New right width of the gate<br/><br/>If None, asserts that lLimitRightHard exists, then uses <code>lLimitRightHard + GATE_EXTEND_WIDTH</code></td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d6e66e2-bd3a-80cb-874c-c7231fecd938" class="">recalcMidpoint()</h2></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-806f-9b53-df8568cf0317" class="">Recalculates and moves the gate midpoint along the gate line such that the new lLimitLeftSoft and lLimitRightSoft are equal</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-805e-bbde-e02034ae6d31" class="">Update the attributes with the new values:</p></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-809e-9a99-e1598b32825e" class="bulleted-list"><li style="list-style-type:disc">lLeft</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-80ed-b857-e95d76aca0fc" class="bulleted-list"><li style="list-style-type:disc">lRight</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-80e1-afdd-d4b860bd2652" class="bulleted-list"><li style="list-style-type:disc">lLimitLeftSoft</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-8069-bc3c-f3057771d95b" class="bulleted-list"><li style="list-style-type:disc">lLimitRightSoft</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-8014-9da0-f50bbe51c6b1" class="bulleted-list"><li style="list-style-type:disc">lLimitLeftHard (if it was not None)</li></ul></div><div style="display:contents" dir="auto"><ul id="2d6e66e2-bd3a-801b-b2ca-d86493fb59d1" class="bulleted-list"><li style="list-style-type:disc">lLimitRightHard (if it was not None)</li></ul></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-80a5-883d-cc509ac79db6" class="">Raises an exception if lLimitLeftSoft and lLimitRightSoft are None</p></div><div style="display:contents" dir="auto"><h1 id="2d4e66e2-bd3a-8044-8d7d-f002aa198d2c" class="">Track Class</h1></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-802a-9eae-d6a69fad4236" class="">Defines the track on which a trajectory can be created and optimised</p></div><div style="display:contents" dir="auto"><h2 id="2d5e66e2-bd3a-80af-9553-e3c640df01bb" class="">Attributes</h2></div><div style="display:contents" dir="ltr"><table id="2d5e66e2-bd3a-8029-8f64-d83e82bd1e09" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-805c-ad78-ce30ea127b3c"><td id="|&gt;wn" class="" style="width:235.66666666666666px"><em>Name</em></td><td id="|~Eu" class="" style="width:235.66666666666666px"><em>Type</em></td><td id="FRHD" class="" style="width:235.66666666666666px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80eb-a71f-cc0b8b07f8b4"><td id="|&gt;wn" class="" style="width:235.66666666666666px">gates</td><td id="|~Eu" class="" style="width:235.66666666666666px">NumPy array of Gate objects</td><td id="FRHD" class="" style="width:235.66666666666666px">Track gates, with order corresponding to the forwards direction around the track</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80bf-87fe-d4d332f450bb"><td id="|&gt;wn" class="" style="width:235.66666666666666px">trackMesh</td><td id="|~Eu" class="" style="width:235.66666666666666px">NumPy array of SciPy interpolators</td><td id="FRHD" class="" style="width:235.66666666666666px">Interpolators for the local track z coordinate around each gate</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d4e66e2-bd3a-80b7-959e-f16015e19903" class="">__init__()</h2></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80e1-bc13-eecb2b54e919" class="">Initialises a Track object, either by loading the Track.pkl file in the provided folder, or if that file does not exist/fails to load, by generating the track from the files in the provided folder</p></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-8094-bf95-dfa1519e7e86" class="">See the initFromPkl() and initFromTrackGen() functions below</p></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80a7-9b93-f1b9e5bf4c9a" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d4e66e2-bd3a-8061-994e-ce41aa3dc651" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80d5-a1fe-df8c3b63474b"><td id="zWQB" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="A:\N" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80b5-90f7-f5222c8e5723"><td id="zWQB" class="" style="width:236.33333333333334px">trackPath</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">String or PathLike</td><td id="A:\N" class="" style="width:236.33333333333334px">Path to the folder containing the required files to load the Track object from the Track pkl file, or to generate the track if the pkl does not exist</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8049-8032-f9a618d52490"><td id="zWQB" class="" style="width:236.33333333333334px">BClosedTrackOverride<br/><br/>*Optional, defaults to None</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Boolean or None</td><td id="A:\N" class="" style="width:236.33333333333334px">Overrides the automatic logic for determining if the track is a closed circuit<br/><br/>Defaults to None, in which case whether the track is closed or not is determined automatically by the distances from the start to finish points of the track limit arrays</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8044-9e67-d51c3fb3e82a"><td id="zWQB" class="" style="width:236.33333333333334px">BForceTrackGen<br/><br/>*Optional, defaults to false</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Boolean</td><td id="A:\N" class="" style="width:236.33333333333334px">If true, overrides the automatic logic and forces the track to be generated and will overwrite the Track pkl file in the trackPath<br/><br/>Defaults to false, in which case the Track pkl file will try to be loaded, and only if it doesn‚Äôt exist/fails to load will the track be generated</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d4e66e2-bd3a-80d3-a497-c56c84db17aa" class="">__initFromPkl()</h2></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80d4-8978-ddafdb0ad404" class="">Internal function to initialise the Track object by loading the Track pkl file at path pklPath</p></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80e6-9904-c038b5ffe33e" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d4e66e2-bd3a-8001-97fe-fcaed0132c53" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-809b-a022-dd9d21b89815"><td id="zWQB" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="A:\N" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80e1-a017-d0ebda7a9d08"><td id="zWQB" class="" style="width:236.33333333333334px">pklPath</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">String or PathLike</td><td id="A:\N" class="" style="width:236.33333333333334px">Path to the track pkl file</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d4e66e2-bd3a-80c0-b43e-ceb5d9b8e322" class="">__initFromTrackGen()</h2></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-806f-922b-e14b38ee7d19" class="">Internal function to initialise the Track object by generating it from the data in the trackPath folder (see the in-depth logic below)</p></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-8081-9431-fa75b29b63fa" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d4e66e2-bd3a-80fe-9e77-ee7d9065418f" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-805b-bbac-f37c5733e303"><td id="zWQB" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="A:\N" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-808e-bf04-f7509b84675d"><td id="zWQB" class="" style="width:236.33333333333334px">trackPath</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">String or PathLike</td><td id="A:\N" class="" style="width:236.33333333333334px">Path to the folder containing the required files to load the Track object from the Track pkl file, or to generate the track if the pkl does not exist</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-804c-813f-e8a743b82899"><td id="zWQB" class="" style="width:236.33333333333334px">BClosedTrackOverride<br/><br/>*Optional, defaults to None</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Boolean or None</td><td id="A:\N" class="" style="width:236.33333333333334px">Overrides the automatic logic for determining if the track is a closed circuit<br/><br/>Defaults to None, in which case whether the track is closed or not is determined automatically by whether the maximum distance from the start to finish points of the track limit arrays is less than CLOSED_TRACK_THRESHOLD_DISTANCE</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80eb-ac0f-f927f0b5f296" class=""><strong>Expected File Structure in trackPath</strong></p></div><div style="display:contents" dir="ltr"><table id="2d4e66e2-bd3a-80cb-9eeb-d5589ca8dc30" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80b2-a3f6-e7f91090f959"><td id="zWQB" class="" style="width:353.5px"><em>Filename</em></td><td id="A:\N" class="" style="width:353.5px"><em>Contents</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8070-834b-dd1e263f7211"><td id="zWQB" class="" style="width:353.5px">xyzLimitLeftSoft.csv</td><td id="A:\N" class="" style="width:353.5px">Coordinates forming the left soft track limit, with each row representing a coordinate in the form:<br/>x,y,z<br/><br/>Going down the rows of coordinates means travelling forward along the track limit<br/><br/>The soft track limit means that the lap is valid as long as 1 tyre is within this limit - think: painted white lines</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8052-8632-e48268e9184d"><td id="zWQB" class="" style="width:353.5px">xyzLimitRightSoft.csv</td><td id="A:\N" class="" style="width:353.5px">Coordinates forming the right soft track limit, with each row representing a coordinate in the form:<br/>x,y,z<br/><br/>Going down the rows of coordinates means travelling forward along the track limit<br/><br/>The soft track limit means that the lap is valid as long as 1 tyre is within this limit - think: painted white lines</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80e3-ab5c-dc60515b86fa"><td id="zWQB" class="" style="width:353.5px">xyzLimitLeftHard.csv<br/><br/>*Optional, will automatically use the xyzLimitLeftSoft.csv file for the left hard track limit if not provided</td><td id="A:\N" class="" style="width:353.5px">Coordinates forming the left hard track limit, with each row representing a coordinate in the form:<br/>x,y,z<br/><br/>Going down the rows of coordinates means travelling forward along the track limit<br/><br/>The hard track limit means that the whole car must be within this limit for the lap to be valid - think: wall, grass, aggressive sausage kerb etc.</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8011-b431-dcf6cef5dc2b"><td id="zWQB" class="" style="width:353.5px">xyzLimitRightHard.csv<br/><br/>*Optional, will automatically use the xyzLimitRightSoft.csv file for the right hard track limit if not provided</td><td id="A:\N" class="" style="width:353.5px">Coordinates forming the right hard track limit, with each row representing a coordinate in the form:<br/>x,y,z<br/><br/>Going down the rows of coordinates means travelling forward along the track limit<br/><br/>The hard track limit means that the whole car must be within this limit for the lap to be valid - think: wall, grass, aggressive sausage kerb etc.</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8015-9841-d779f2248c71"><td id="zWQB" class="" style="width:353.5px">xyStartGateOverride.csv<br/><br/>*Optional, will automatically use the first coordinate pair from xyzLimitLeftSoft.csv and xyzLimitRightSoft.csv to create the start gate if not provided</td><td id="A:\N" class="" style="width:353.5px">Coordinates to override the location and orientation of the track‚Äôs start gate, in the form:<br/>xLeft,yLeft<br/>xRight,yRight<br/><br/>Note that the actual start gate after track generation may not have the same left and right coordinates as defined here, though it will still lie on the same line as defined, with the same direction</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-802c-a409-dc71ebf1efb3"><td id="zWQB" class="" style="width:353.5px">xyFinishGateOverride.csv<br/><br/>*Optional, will automatically use the first (if the track is closed) or last (if the track is not closed) coordinate pair from xyzLimitLeftSoft.csv and xyzLimitRightSoft.csv to create the finish gate if not provided</td><td id="A:\N" class="" style="width:353.5px">Coordinates to override the location and orientation of the track‚Äôs finish gate, in the form:<br/>xLeft,yLeft<br/>xRight,yRight<br/><br/>Note that the actual finish gate after track generation may not have the same left and right coordinates as defined here, though it will still lie on the same line as defined, with the same direction</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-80b2-b0ca-d60b6a93766f"><td id="zWQB" class="" style="width:353.5px">eventData_____.json<br/><br/>*Optional, does not create (custom) event gates for the track if not provided<br/><br/>*Can have multiple files beginning with ‚ÄòeventData‚Äô and ending with ‚Äò.json‚Äô to allow multiple events</td><td id="A:\N" class="" style="width:353.5px">Contains the keys ‚Äòtype‚Äô, ‚ÄòxyStartLeft‚Äô, ‚ÄòxyStartRight‚Äô, ‚ÄòxyFinishLeft‚Äô, ‚ÄòxyFinishRight‚Äô and optionally ‚Äòproperties‚Äô which are used to specify and event<br/><br/>‚Äòtype‚Äô is a string identifying the type of event (not including ‚ÄòStartFinish‚Äô as that is covered by the override files above or automatically determined)<br/><br/>‚ÄòxyStartLeft‚Äô is the left coordinate of the event start gate, as a list of floats in the form [xStartLeft, yStartLeft]<br/><br/>‚ÄôxyStartRight‚Äô is the right coordinate of the event start gate, as a list of floats in the form [xStartRight, yStartRight]<br/><br/>‚ÄòxyFinishLeft‚Äô is the left coordinate of the event finish gate, as a list of floats in the form [xFinishLeft, yFinishLeft]<br/><br/>‚ÄòxyFinishRight‚Äô is the right coordinate of the event finish gate, as a list of floats in the form [xFinishLeft, yFinishLeft]<br/><br/>‚Äòproperties‚Äô is the dictionary of properties for the event and is only needed if the event requires properties to define it<br/><br/>The name used for the event is parsed from the filename (i.e. the unique filename substring represented by ‚Äò_____‚Äô)<br/><br/>Note that the actual gates after track generation may not have the same left and right coordinates as defined here, though they will still lie on the same lines as defined, with the same directions</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d4e66e2-bd3a-8036-bc76-deafbb91d79a"><td id="zWQB" class="" style="width:353.5px">xyzExtraCoordsArray_____.csv<br/><br/>*Optional, will only use the coordinates from the available track limits files to create the track mesh if not provided<br/><br/>*Can have multiple files beginning with ‚ÄòxyzExtraCoordsArray‚Äô and ending with ‚Äò.csv‚Äô to allow multiple extra coordinate arrays to create a higher resolution track mesh</td><td id="A:\N" class="" style="width:353.5px">Coordinates in the same form as the track limits, with each row representing a coordinate in the form:<br/>x,y,z<br/><br/>Going down the rows of coordinates means travelling forward along the track<br/><br/>These are expected to be within the hard track limits (i.e. enclosed by xyzLimitLeftHard and xyzLimitRightHard), though some tolerance is permitted by the gate extending some distance beyond the hard track limits</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h3 id="2d6e66e2-bd3a-8085-a483-cd4686d600bf" class="">__initGateFromCoords()</h3></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-80ae-b0b8-e9976d2cb19e" class="">Initialise a Gate object (with the minimum initialisation) by processing the left and right coordinates into the midpoint coordinate and heading angle before passing them into the Gate initialisation function</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-809f-a8c1-f28dca31b0b7" class="">Returns a Gate object</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-80d3-ac6c-e8d3981d7d70" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d6e66e2-bd3a-8035-9bfb-e9e04ad35ed9" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-804c-8a8f-cbee9271b4a5"><td id="zWQB" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="A:\N" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8078-98a7-d33d417b3d33"><td id="zWQB" class="" style="width:236.33333333333334px">xyLeft</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">NumPy array of floats</td><td id="A:\N" class="" style="width:236.33333333333334px">Left coordinate of the gate, only on the 2D plane [x, y]</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8085-acea-e411810f537e"><td id="zWQB" class="" style="width:236.33333333333334px">xyRight</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">NumPy array of floats</td><td id="A:\N" class="" style="width:236.33333333333334px">Right coordinate of the gate, only on the 2D plane [x, y]</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d6e66e2-bd3a-8009-a2f0-e56d0b718877"><td id="zWQB" class="" style="width:236.33333333333334px">BAllowNegativeAHeading</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">Boolean</td><td id="A:\N" class="" style="width:236.33333333333334px">If true, will wrap the calculated heading angle to the range from -pi to pi<br/><br/>If false, the calculated gate heading angle will be in the range 0 to 2 pi</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h3 id="2d5e66e2-bd3a-804a-930a-cba263bbfa7d" class="">__parseTrackFiles()</h3></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80f0-99c7-c451cdbc945b" class="">Internal function which follows the fallback logic detailed above in the expected file structure of trackPath, to parse the track files into the variables:</p></div><div style="display:contents" dir="auto"><ul id="2d4e66e2-bd3a-80bc-aaf3-fbfc33ee39c4" class="bulleted-list"><li style="list-style-type:disc">coordinateArraysDict<div style="display:contents" dir="auto"><ul id="2d4e66e2-bd3a-8061-a29b-e1283a3bd9cd" class="bulleted-list"><li style="list-style-type:circle">Dictionary containing the CoordinateArray objects for track limits and any extra coordinate arrays provided, with the keys corresponding to their respective file names</li></ul></div><div style="display:contents" dir="auto"><ul id="2d4e66e2-bd3a-80bf-9835-fa9e7ab4a5ea" class="bulleted-list"><li style="list-style-type:circle">This will always contain the keys:<div style="display:contents" dir="auto"><ul id="2d4e66e2-bd3a-8040-9580-f3ed7419b36d" class="bulleted-list"><li style="list-style-type:square">limitLeftSoft</li></ul></div><div style="display:contents" dir="auto"><ul id="2d4e66e2-bd3a-80b2-a9d9-dfdeed108f63" class="bulleted-list"><li style="list-style-type:square">limitRightSoft</li></ul></div><div style="display:contents" dir="auto"><ul id="2d4e66e2-bd3a-80ef-ae4e-c42cecc689b9" class="bulleted-list"><li style="list-style-type:square">limitLeftHard</li></ul></div><div style="display:contents" dir="auto"><ul id="2d4e66e2-bd3a-809f-809a-dd054faafee8" class="bulleted-list"><li style="list-style-type:square">limitRightHard</li></ul></div></li></ul></div><div style="display:contents" dir="auto"><ul id="2d4e66e2-bd3a-805c-b59a-d65c44df80f0" class="bulleted-list"><li style="list-style-type:circle">Any extra coordinate arrays provided will be stored with the key corresponding to the filename (without the ‚Äòxyz‚Äô on the front and without the file extension)</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-801a-83d9-f2b4e53a4f8c" class="bulleted-list"><li style="list-style-type:circle">A dictionary for all coordinate arrays is used (over separate variables for each limit) to make the track mesh creation easier in terms of getting all the coordinate arrays</li></ul></div></li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8096-8cf8-c7205901b6aa" class="bulleted-list"><li style="list-style-type:disc">eventGatesDict<div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80d5-b458-f164df6b2811" class="bulleted-list"><li style="list-style-type:circle">Has a key for each (valid) event type, with the corresponding value being a list containing Gate objects with that event type</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80ce-8c03-c64059e3570e" class="bulleted-list"><li style="list-style-type:circle">For the ‚ÄòStartFinish‚Äô key, its value will be [startGate, finishGate] in that order</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-808a-99bc-ef994a2d36a5" class="bulleted-list"><li style="list-style-type:circle">Note that this dictionary does not contain the ‚ÄòGateCreation‚Äô key yet - those event gates will be added in the section below</li></ul></div></li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-808d-93da-d3003848a8e7" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d5e66e2-bd3a-805d-b255-c3df881491c1" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-8043-87be-c8ae55390e34"><td id="zWQB" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="A:\N" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-800d-b522-c92a97de31c0"><td id="zWQB" class="" style="width:236.33333333333334px">pklPath</td><td id="NS&gt;&lt;" class="" style="width:236.33333333333334px">String or PathLike</td><td id="A:\N" class="" style="width:236.33333333333334px">Path to the track pkl file</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h3 id="2d5e66e2-bd3a-80ab-a1d4-efe8729a9108" class="">__saveTrackPlot()</h3></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80ff-9fa6-e10247da69b3" class="">Internal function to save a plot of the generated track to the plot file in trackPath, mostly for debugging</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8057-a084-e7b2d561d27f" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d5e66e2-bd3a-8031-9de4-dc2ac4aa04a4" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-8034-bb83-e7e260843301"><td id="=YMl" class="" style="width:235.66666666666666px"><em>Name</em></td><td id="Tqjt" class="" style="width:235.66666666666666px"><em>Type</em></td><td id="v[W?" class="" style="width:235.66666666666666px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-809f-82ad-c1fef03f88e5"><td id="=YMl" class="" style="width:235.66666666666666px">trackPath</td><td id="Tqjt" class="" style="width:235.66666666666666px">String or PathLike</td><td id="v[W?" class="" style="width:235.66666666666666px">Path to the folder to save the Track pkl file</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80ed-a0e9-f7a3cf888de9"><td id="=YMl" class="" style="width:235.66666666666666px">coordinateArraysDict</td><td id="Tqjt" class="" style="width:235.66666666666666px">Dictionary</td><td id="v[W?" class="" style="width:235.66666666666666px">Dictionary containing the CoordinateArray objects for track limits and any extra coordinate arrays provided</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-8067-8f97-dd290b9dea5b"><td id="=YMl" class="" style="width:235.66666666666666px">gates</td><td id="Tqjt" class="" style="width:235.66666666666666px">List or NumPy array of Gate objects</td><td id="v[W?" class="" style="width:235.66666666666666px">Track gates, with order corresponding to the forwards direction around the track</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80d9-863e-f7560dab3cdc"><td id="=YMl" class="" style="width:235.66666666666666px">badGateIndexes<br/><br/>*Optional, defaults to an empty list</td><td id="Tqjt" class="" style="width:235.66666666666666px">List of integers</td><td id="v[W?" class="" style="width:235.66666666666666px">Indexes of track gates that caused the exception to be manually thrown<br/><br/>Gates in any of these indexes will be plotted with dotted lines</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80a1-bb71-c2f86b91c15f" class="">Calculates the plot boundaries as the bounds of the track limits coordinate arrays (only need to check the hard limits), plus a margin of 2 * GATE_EXTEND_WIDTH on all sides</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8072-a274-f32aefd47285" class="">Creates a new Matplotlib figure and axes with:</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-806c-90b5-faaaeefaf282" class="bulleted-list"><li style="list-style-type:disc">figsize with the same aspect ratio as the plot boundaries, scaled so the area is equal to TRACK_PLOT_AREA</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80cc-aba0-c693fbbbf0bf" class="bulleted-list"><li style="list-style-type:disc">layout = ‚Äòconstrained‚Äô</li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8003-8655-e381eea98485" class="">Sets the x and y limits to the plot boundaries</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80ce-9db6-f0eb909879b7" class="">Sets axis(‚Äôequal‚Äô) for the correct aspect ratio</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80bd-bbd3-eb1f76188c3d" class="">Plot track limit coordinate arrays</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8054-a200-d2b9d0a4bf37" class="bulleted-list"><li style="list-style-type:disc">Hue/value unique to each limit - dark red for limitLeftHard, light red for limitLeftSoft, light green for limitRightSoft, dark green for limitRightHard</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80a0-800f-f248b9e9cc23" class="bulleted-list"><li style="list-style-type:disc">Saturation decreasing with the z coordinate</li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80a0-a397-d8a99bc1ef5a" class="">Plot extra coordinate arrays (including the 2 generated during track mesh creation)</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-806c-aa56-f24db06ccb6a" class="bulleted-list"><li style="list-style-type:disc">Greyscale, with value decreasing with the z coordinate</li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-802b-bef9-f1d54a84b907" class="">Plot track gates</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80e5-b4ae-c1f2475419ea" class="bulleted-list"><li style="list-style-type:disc">Annotated with the index of the gate, and the name if it is an event gate (with the special case that the start and finish gate have the names ‚ÄòStart‚Äô and ‚ÄòFinish‚Äô respectively)</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80ce-afc4-fab96f0f4d11" class="bulleted-list"><li style="list-style-type:disc">Coloured by event type, with the special cases of:<div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8079-a042-db994a3b6570" class="bulleted-list"><li style="list-style-type:circle">Black if no event</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-802a-a58d-fc0951a9c627" class="bulleted-list"><li style="list-style-type:circle">Green if start gate</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8010-bafa-c55cf7c38a4e" class="bulleted-list"><li style="list-style-type:circle">Red if finish gate</li></ul></div></li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-804a-8d8e-da098254c465" class="">Scatter plot track gate intersections with the track limits (group by event type and track limit type, then use plot() with the kwarg ls=‚Äô‚Äô to be faster)</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8094-a6ad-dacceec8ad41" class="bulleted-list"><li style="list-style-type:disc">Coloured by event type (same as the track gates)</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-807e-9726-e94bd2a73189" class="bulleted-list"><li style="list-style-type:disc">Markers according to the track limit side:<div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80e9-8165-cbd92ebb842b" class="bulleted-list"><li style="list-style-type:circle">‚Äò&lt;‚Äô for left track limit</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8021-ba0d-f24cc6bfa75b" class="bulleted-list"><li style="list-style-type:circle">‚Äò&gt;‚Äô for right track limit</li></ul></div></li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8040-b759-c9c60a24eba0" class="bulleted-list"><li style="list-style-type:disc">Fill style according to the track limit type:<div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8018-8b34-e1cf3cb52f95" class="bulleted-list"><li style="list-style-type:circle">Filled for hard track limit</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80da-bb37-e0207101afc4" class="bulleted-list"><li style="list-style-type:circle">Unfilled for soft track limit</li></ul></div></li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80ed-8ee4-d1851d260050" class="">Add text to explain the notation</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-807b-bee8-f17ff540a31d" class="bulleted-list"><li style="list-style-type:disc">Track limit coordinate arrays are coloured with red/green representing left/right, light/dark representing soft/hard, and saturation decreasing with increasing z coordinate</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80af-b559-c5a69c189844" class="bulleted-list"><li style="list-style-type:disc">Extra coordinate arrays used for track mesh creation are greyscale with the value (lightness) decreasing with increasing z coordinate</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80fc-8f59-e252b44bcb86" class="bulleted-list"><li style="list-style-type:disc">Track gates are coloured by event type, with markers representing the calculated intersections with the track limits, with the triangle direction representing left/right, and the fill representing soft/hard</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80bd-911b-c3d56e7deca6" class="bulleted-list"><li style="list-style-type:disc">Track gates that were problematic and raised an exception are shown with dotted lines</li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-800d-a8d4-d05d01405abe" class="">Saves the figure with a resolution equivalent to 2 pixels/metre - Find the width (in inches) of the axes from <a href="https://stackoverflow.com/questions/19306510/determine-matplotlib-axis-size-in-pixels">https://stackoverflow.com/questions/19306510/determine-matplotlib-axis-size-in-pixels</a>, and use it to calculate the required dpi</p></div><div style="display:contents" dir="auto"><h3 id="2d4e66e2-bd3a-807c-8867-f6a9a5ae338a" class="">Track Generation Logic</h3></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80da-b9e0-efc944c7a2b4" class=""><strong>Read and Parse Track Files to Variables</strong></p></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80c5-be4f-c66699b6986f" class="">Gets coordinateArraysDict and eventGatesDict from parseTrackFiles()</p></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-80dc-8087-e5fada331667" class=""><strong>Setup for Gate Creation</strong></p></div><div style="display:contents" dir="auto"><p id="2d4e66e2-bd3a-801d-ab26-c6ca4a3102cc" class="">Create the first gate from the first coordinates in limitLeftSoft and limitRightSoft, with the event specified (<code>type = &#x27;GateCreation&#x27;, BStart = True</code>)</p></div><div style="display:contents" dir="auto"><ul id="2d4e66e2-bd3a-80ed-879f-e0480a3accc4" class="bulleted-list"><li style="list-style-type:disc">Run the gate functions to calculate all gate attributes, then update the gate widths to follow the GATE_EXTEND_WIDTH constant</li></ul></div><div style="display:contents" dir="auto"><ul id="2d4e66e2-bd3a-8000-871a-c47065caf478" class="bulleted-list"><li style="list-style-type:disc">Check if this gate intersects with startGate - if it intersects, use startGate for the first gate instead and repeat the point above for the startGate</li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8064-a5ce-f9e1f31341db" class="">Create the list gates, initialised only containing first gate just created above - this list will contain Gate objects representing the track gates in order of the direction of travel along the track</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80aa-bf39-f84b292deff7" class="">Then create the final gate - this gate should only span the width between the soft track limits to avoid prematurely stopping gate creation (the gate will be extended and its attributes calculated once it has been reached in the gate creation process)</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-80c0-8b9e-ff5b922bb199" class="bulleted-list"><li style="list-style-type:disc">If the track is closed, copy the first gate as the stop gate, then modify the gate width to only span the width of the soft track limits and modify the event attribute BStart to false</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8086-add1-db63c3fdab55" class="bulleted-list"><li style="list-style-type:disc">If the track is not closed, create the final gate from the final coordinates in limitLeftSoft and limitRightSoft, with the bare minimum initialisation but with the event specified (<code>type = &#x27;GateCreation&#x27;, BStart = False</code>)</li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80f2-9664-c125806f5471" class="">Add the ‚ÄòGateCreation‚Äô key to eventGatesDict with the value being the list containing only finalGate</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8084-b37a-d4093e2968ac" class=""><strong>Gate Creation Loop</strong></p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80ec-b68c-ff94afd58b23" class="">Run this loop until the gate creation has reached the last gate, denoted by the flag BStopGateCreation being true</p></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-807d-b3e5-ebfd0f4d02a1" class="numbered-list" start="1"><li>Get reduced track limits CoordinateArray objects and Shapely LineStrings (‚Äùreduced‚Äù as they are for the local region around the gate)<div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-802a-a71c-cc192a6137dc" class="numbered-list" start="1"><li>CoordinateArray objects as reducedLimitLeftSoft, reducedLimitRightSoft, reducedLimitLeftHard, and reducedLimitRightHard<div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-800f-b9af-e6e03b03d649" class="numbered-list" start="1"><li>Distance window lower bound 0, upper bound to be decided (will be a constant)</li></ol></div><div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-80b3-acb1-e1fc57bc6408" class="numbered-list" start="2"><li>Heading window of ¬±pi radians (180 degrees) from the previous gate heading (will be a constant, subject to change)</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-803d-8bdb-f95429481361" class="numbered-list" start="2"><li>Shapely LineStrings computed from the coordinates of the reduced soft track limits CoordinateArray objects, as reducedLimitLeftSoftLS and reducedLimitRightSoftLS, reducedLimitLeftHardLS, and reducedLimitRightHardLS</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-80de-9bb5-f8ef6396ec68" class="numbered-list" start="2"><li>Optimise the new gate placement with SciPy optimise<div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-8029-8657-f9536b91afd8" class="numbered-list" start="1"><li>Find the 2 parameters [psi, theta] to place the gate midpoint in the centre of the track, facing the direction of travel - initial guess of [0, 0]<div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-800b-bf71-fb05269e55e9" class="numbered-list" start="1"><li>The midpoint of the new gate will be at distance GATE_STEP_DISTANCE from the midpoint of the previous gate</li></ol></div><div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-8041-bbef-fbc30bf658b3" class="numbered-list" start="2"><li>psi is the anti-clockwise angle in radians from the previous gate direction to place the midpoint of the new gate</li></ol></div><div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-808d-a363-d86a31dcc621" class="numbered-list" start="3"><li>theta is the anti-clockwise heading angle offset in radians of the new gate, from psi</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-80dd-a8cc-e8db3a2dcedc" class="numbered-list" start="2"><li>Try using root finding first, to solve both residuals below to 0:<div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-805c-92ab-ceb8f2ad34a8" class="numbered-list" start="1"><li><code>lWidthLimitLeftSoft - lWidthLimitRightSoft</code> equals 0 when the gate is in the middle of the soft track limits</li></ol></div><div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-807a-81be-f034c57fd59d" class="numbered-list" start="2"><li><code>ALimitLeftSoft - ALimitRightSoft</code> equals 0 when the left and right soft track limits are widening/narrowing at the same rate, where these angles are calculated from the AHeadingsFilt attribute of the soft track limits CoordinateArray objects</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-8077-a56f-ee7a79d2a7b7" class="numbered-list" start="3"><li>If the root finding fails, fall back to using local minimisation of the objective function:<div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-8058-a98c-ca68cba1a7fc" class="numbered-list" start="1"><li><code>lWidthLimitLeftSoft + lWidthLimitRightSoft + abs(lWidthLimitLeftSoft - lWidthLimitRightSoft)</code> which is minimised when the gate midpoint is in the centre of the track and the gate widths to the soft track limits are minimised</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-8093-8826-e7b07ead5d85" class="numbered-list" start="4"><li>Raise an exception if the gate creation exploded (optimised parameters cause the gate midpoint to go beyond the bounding box [xMin, xMax, yMin, yMax] of the hard track limits - but run __saveTrackPlot() first with this bad gate added and the badGateIndexes list passed for debugging</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-801d-a691-e9157c711f9b" class="numbered-list" start="3"><li>Create the new gate from the optimised parameters<div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-80c2-a202-cd243590dc1a" class="numbered-list" start="1"><li>Runs the gate functions to calculate all gate attributes, then updates the gate widths to follow the GATE_EXTEND_WIDTH constant</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-80e3-a0da-d37a3e146e76" class="numbered-list" start="4"><li>Create the flag BValidGate for whether this new gate is valid (and should be added to the gates list) or invalid (intersects with the previous or next gate therefore should not be added to the gates list)<div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-80c9-ab3d-d3b4ac1e0ee9" class="numbered-list" start="1"><li>Initialise this flag to true</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-8021-a401-d17fe58bba8e" class="numbered-list" start="5"><li>Create a list of event gates contained by the track segment from the previous gate to the new gate, sorted by (ascending) distance of their midpoints from the midpoint of the previous gate<div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-8040-8f43-dbd1791c1d39" class="numbered-list" start="1"><li>Whether an event gate is contained by the track segment is determined by satisfying both conditions:<div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-80c5-8450-dee482f074e7" class="numbered-list" start="1"><li>Dot product between the event gate direction vector and the vector from the midpoint of the previous gate to the midpoint of the new gate exceeds DIRECTION_SIMILARITY_THRESHOLD</li></ol></div><div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-80d4-8f32-dfb2febbb360" class="numbered-list" start="2"><li>Line from the midpoint of the previous gate to the midpoint new gate intersects the event gate line</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-80f4-bcd6-cef38576956b" class="numbered-list" start="2"><li>For each event gate in the list:<div style="display:contents" dir="auto"><ol type="i" id="2d6e66e2-bd3a-8085-9675-f93336864bd2" class="numbered-list" start="1"><li>Run the gate functions to calculate all gate attributes - calcLimitSofts(), calcLimitHards()</li></ol></div><div style="display:contents" dir="auto"><ol type="i" id="2d6e66e2-bd3a-80a2-8c4a-d43382dbf89b" class="numbered-list" start="2"><li>Update the gate widths to follow GATE_EXTEND_WIDTH - updateWidths()</li></ol></div><div style="display:contents" dir="auto"><ol type="i" id="2d6e66e2-bd3a-80ac-b3c7-f9c5ca926e49" class="numbered-list" start="3"><li>Recalculate the gate midpoint to be centred in the track - recalcMidpoint()</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-80e3-9117-d9b15d08160d" class="numbered-list" start="3"><li>Sort the list in order of (ascending) distance of their midpoints from the midpoint of the previous gate<div style="display:contents" dir="auto"><ol type="i" id="2d6e66e2-bd3a-8016-a8ea-fd8643475e90" class="numbered-list" start="1"><li>If the list contains 2 event gates with attributes <code>type == &#x27;StartFinish&#x27;</code>, sorts such that the gate with <code>BStart == False</code> comes before the gate with <code>BStart == True</code> (finish gate comes before start gate if they are in the same track segment)</li></ol></div></li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-805d-854b-d2cd918d9e58" class="numbered-list" start="6"><li>If the list of event gates contained by the track segment from the previous gate to the new gate is not empty:<div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-8025-af19-e8dcb3c76291" class="numbered-list" start="1"><li>Check if any of the event gates have both attributes <code>type == &#x27;GateCreation&#x27; and BStart == False</code> - and if so, set the flag BStopGateCreation to true, set the flag BValidGate to false, and remove the event gates in this list following the ‚ÄòGateCreation‚Äô finish gate<div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-804e-bea2-ca043763c2f2" class="numbered-list" start="1"><li>If there are multiple event gates still in this list, check if the ‚ÄòGateCreation‚Äô finish gate (now last in this list) intersects with the 2nd last gate in this list - and if an intersection is detected, remove the ‚ÄòGateCreation‚Äô finish gate</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-8093-87c4-ce019ebdcb25" class="numbered-list" start="2"><li>Check if consecutive event gates intersect with each other at a single point (multiple event gates can share the same line)<div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-80fe-b88c-fa64434f6460" class="numbered-list" start="1"><li>If an intersection is detected, raise an exception (possible fixes are: redefine the event gates to be more spaced out, reduce GATE_EXTEND_WIDTH, increase DIRECTION_SIMILARITY_THRESHOLD) - but run __saveTrackPlot() first with these gates added and the badGateIndexes list passed for debugging</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-80f9-b558-f2c1f1162be2" class="numbered-list" start="3"><li>From the first event gate (closest to the previous gate) in the list of event gates contained by this track segment:<div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-8047-ad03-d0cfc88a7215" class="numbered-list" start="1"><li>Check if the first event gate in this list (closest to the previous gate) intersects with the last gate in the gates list (i.e. the previous gate)<div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-80fb-8efa-e7447c9c5862" class="numbered-list" start="1"><li>If they intersect, check if the last gate is an event gate (this does not need the check whether the gates share the same line as the event gates will only be ‚Äúseparated‚Äù like this if they were on different lines) - and if so, raise an exception (possible fixes are: redefine the event gates to be more spaced out, reduce GATE_EXTEND_WIDTH, increase DIRECTION_SIMILARITY_THRESHOLD) - but run __saveTrackPlot() first with these gates added and the badGateIndexes list passed for debugging</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-80cf-ac53-cda67d9da21a" class="numbered-list" start="2"><li>Remove the last gate from the gates list and repeat this step until the first event gate in this list no longer intersects with the last gate in the gates list</li></ol></div></li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-8029-9169-e2b3d30a02b3" class="numbered-list" start="4"><li>For each event gate in this list:<div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-805a-bfde-c60321295aa8" class="numbered-list" start="1"><li>Append the event gate to the gates list</li></ol></div><div style="display:contents" dir="auto"><ol type="i" id="2d5e66e2-bd3a-800c-a4b4-cbe5e87d0461" class="numbered-list" start="2"><li>Remove the event gate element from the respective list in eventGatesDict (where the key corresponding to the list is the same as the event type of the event gate)</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-803f-af6e-cd908d6294f0" class="numbered-list" start="5"><li>If BValidGate is still true, check if the last event gate in this list (closest to the new gate) intersects with the new gate - if they intersect, set the flag BValidGate to false</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-801e-a571-e4483dcecec0" class="numbered-list" start="7"><li>If BValidGate is still true, check if the new gate intersects with the previous gate by checking the gate lines with the Shapely intersects() function - If they intersect, set the flag BValidGate to false</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-80e2-8752-eae2213e1cb7" class="numbered-list" start="8"><li>If BValidGate is still true, append the new gate to the gates list</li></ol></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8089-a4de-e28fa1f33ebe" class=""><strong>Postprocessing and Validation</strong></p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80b0-bc93-cbeb0c2ba021" class="">Run __saveTrackPlot()</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8037-8556-cc7dd7739343" class="">Convert the gate list to a NumPy array</p></div><div style="display:contents" dir="auto"><p id="2d6e66e2-bd3a-80ce-a458-ea27462ff372" class="">If the track is closed and the gate with <code>type == &#x27;StartFinish&#x27;</code> and <code>BStart == False</code> comes before the gate with event attribute where <code>type == &#x27;StartFinish&#x27;</code> and <code>BStart == True</code> (finish gate before start gate), use NumPy roll() such that the finsh gate is the last index in the gate list</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80d7-adc5-cd833f320938" class="">Raise exceptions if any of the conditions below are satisfied:</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8073-94d7-c2a2c1bf6857" class="bulleted-list"><li style="list-style-type:disc">eventGatesDict contains non-empty lists (gate creation stopped before all event gates were added, list all the remaining event gates in the exception message)</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-804b-92f0-d87e081c4e2e" class="bulleted-list"><li style="list-style-type:disc">Track is not closed and the gate with event attribute where <code>type == &#x27;StartFinish&#x27;</code> and <code>BStart == False</code> comes before the gate with event attribute where <code>type == &#x27;StartFinish&#x27;</code> and <code>BStart == True</code> (track is point-to-point/not closed, but finish gate is before the start gate)</li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8054-98b3-d807cc14b662" class=""><strong>Track Mesh Creation</strong></p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80df-960c-e4d41b7cc689" class="">Generate extrapolated gate coordinates - this is necessary to allow better handling of the track mesh outside the bounds of the hard track limits, as SciPy multivariate interpolation doesn‚Äôt support extrapolation</p></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-80c0-a748-e0375e6e3901" class="numbered-list" start="1"><li>Create 2 empty NumPy arrays, each of size (length of gates array, 3), which will contain floats</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-801d-922c-e04cdc667b6e" class="numbered-list" start="2"><li>For each track gate, get the left and right [x, y, z] coordinates of the gate (where the z coordinates are linearly extrapolated from the z coordinates of the left and right hard limits) and store them in the index of the NumPy arrays corresponding to the index of the track gate</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-8077-9147-d0bde2aa61cf" class="numbered-list" start="3"><li>Create 2 new CoordinateArray objects from the left and right sets of extrapolated gate coordinates above, and add these to coordinateArraysDict</li></ol></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-804e-ac63-f110f465af2e" class="">Create an empty NumPy array the same length of the gates array, which will contain SciPy multivariate interpolator objects (one of the interpolators for unstructured data) - this will be the meshArray representing the track mesh</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8024-bcba-d90fa4b10241" class="">At each track gate:</p></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-8026-9975-cd1e94bac1e9" class="numbered-list" start="1"><li>Get the reduced CoordinateArray objects of all the CoordinateArray objects in coordinateArraysDict</li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-807c-9881-ebf33e36f5d2" class="numbered-list" start="2"><li>Parse the reduced CoordinateArray objects into:<div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-8001-94aa-c2cb31e2c91a" class="numbered-list" start="1"><li>A 2D NumPy array containing all the [x, y] coordinates in the CoordinateArray objects</li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-8012-947e-df0be1dd96e0" class="numbered-list" start="2"><li>Another NumPy array containing all the corresponding z coordinates</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><ol type="1" id="2d5e66e2-bd3a-8074-ba04-eed31ec009b6" class="numbered-list" start="3"><li>Initialise the SciPy multivariate interpolator with the arguments below, and store it in the index of meshArray corresponding to the index of the track gate<div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-8048-a652-d65addd440df" class="numbered-list" start="1"><li>points: 2D NumPy array containing all the [x, y] coordinates parsed above</li></ol></div><div style="display:contents" dir="auto"><ol type="a" id="2d5e66e2-bd3a-802b-b992-f4c98253e487" class="numbered-list" start="2"><li>values: NumPy array containing all the corresponding z coordinates parsed above</li></ol></div></li></ol></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80d3-ab1d-c98586dd1040" class=""><strong>Saving</strong></p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80e4-aff3-f96292bda618" class="">Set all class attributes with the values calculated from the track generation</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80ac-a412-fbeffee07c96" class="">Pickle the Track object using pkl.dump(self) to the track pkl file in trackPath</p></div><div style="display:contents" dir="auto"><h2 id="2d5e66e2-bd3a-804b-800d-d80716bd7a23" class="">calcTrackZ()</h2></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80d8-bd7a-c2e44b332365" class="">Calculates the z coordinate of the track at the specified [x, y] coordinate, using the local track mesh interpolator corresponding to the gate index provided</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-80ab-8e25-f512d8dae22a" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d5e66e2-bd3a-80db-bd43-dca3246f3f99" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80cd-8cd5-c26ef4641231"><td id="kdtD" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="o{kC" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="[dC[" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80dd-a323-f6ec74697b4f"><td id="kdtD" class="" style="width:236.33333333333334px">xy</td><td id="o{kC" class="" style="width:236.33333333333334px">List or NumPy array of floats</td><td id="[dC[" class="" style="width:236.33333333333334px">Coordinate to calculate the z coordinate of the track at, in the form [x, y]</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80a7-b084-d6796423a671"><td id="kdtD" class="" style="width:236.33333333333334px">gateIndex</td><td id="o{kC" class="" style="width:236.33333333333334px">Integer</td><td id="[dC[" class="" style="width:236.33333333333334px">Index of the gate, which determines which local track mesh interpolator to use to calculate the z coordinate</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-8000-8d61-ce0bd4627876"><td id="kdtD" class="" style="width:236.33333333333334px">BReturnNaN<br/>*Optional, defaults to false</td><td id="o{kC" class="" style="width:236.33333333333334px">Boolean</td><td id="[dC[" class="" style="width:236.33333333333334px">Flag for whether to sanitise the calculated z coordinate<br/><br/>If true, returns 0 instead of NaN if the xy coordinate was outside the interpolation region<br/><br/>If false, returns NaN if the xy coordinate was outside the interpolation region</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h2 id="2d5e66e2-bd3a-80f6-b1f3-da0a01b52c25" class="">calcTrackNormal()</h2></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8012-b43c-d63127d245e6" class="">Calculates the normal vector to the track at the specified [x, y] or [x, y, z] coordinate from forward differencing of the z coordinate</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-804d-b222-e5f7d9b70fcb" class="">If the forward differencing fails due to the track z coordinate being NaN, returns the failed track normal [0, 0, 1] (directly upwards like a flat track)</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-805c-b9e0-e7f6b1385dc9" class="">Forward differencing is used as the SciPy multivariate interpolators don‚Äôt return the gradients</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8002-a266-cd7bc05d0226" class=""><strong>Arguments</strong></p></div><div style="display:contents" dir="ltr"><table id="2d5e66e2-bd3a-80db-9990-da01383ccda2" class="simple-table"><tbody><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-8070-a107-c5f31dc95f9b"><td id="kdtD" class="" style="width:236.33333333333334px"><em>Name</em></td><td id="o{kC" class="" style="width:236.33333333333334px"><em>Type</em></td><td id="[dC[" class="" style="width:236.33333333333334px"><em>Description</em></td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-80af-afea-cd89b60cfe0e"><td id="kdtD" class="" style="width:236.33333333333334px">xy_xyz</td><td id="o{kC" class="" style="width:236.33333333333334px">List or NumPy array of floats</td><td id="[dC[" class="" style="width:236.33333333333334px">Coordinate to calculate the z coordinate of the track at, in the form [x, y] or [x, y, z]<br/><br/>If the z coordinate is provided, it will skip the calculation of the unpertubed track z coordinate and just use the provided value - so should calculate faster</td></tr></div><div style="display:contents" dir="ltr"><tr id="2d5e66e2-bd3a-806c-9484-eb75ce133718"><td id="kdtD" class="" style="width:236.33333333333334px">gateIndex</td><td id="o{kC" class="" style="width:236.33333333333334px">Integer</td><td id="[dC[" class="" style="width:236.33333333333334px">Index of the gate, which determines which local track mesh interpolator to use to calculate the track normal</td></tr></div></tbody></table></div><div style="display:contents" dir="auto"><h3 id="2d5e66e2-bd3a-8079-bcfb-e5df9b7eed86" class="">Calculation Logic</h3></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-800d-8fa4-cee9422f6f9e" class="">If the z coordinate is not provided, calculates it from calcTrackZ() with the flag BReturnNaN set to true - if the z coordinate is NaN, returns the failed track normal [0, 0, 1]</p></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8031-aa8f-cc8c53d3ec96" class="">In each of the x and y directions:</p></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8025-9bda-e115629cd62b" class="bulleted-list"><li style="list-style-type:disc">Perturbs the specified coordinate in the positive direction, then uses calcTrackZ() with the BReturnNaN flag set to true to calculate the track z coordinate at the perturbed location</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8027-afbb-c0656be18974" class="bulleted-list"><li style="list-style-type:disc">If this perturbed location has a NaN track z coordinate, pertubs in the opposite direction - and if it is still NaN, returns the failed track normal [0, 0, 1]</li></ul></div><div style="display:contents" dir="auto"><ul id="2d5e66e2-bd3a-8019-a802-dad8195ad805" class="bulleted-list"><li style="list-style-type:disc">Calculates the vector from the specified coordinate to this perturbed coordinate, then scales the vector so it has a magnitude of 1, and reverses the vector if it was perturbed in the negative direction</li></ul></div><div style="display:contents" dir="auto"><p id="2d5e66e2-bd3a-8085-b082-dd37fbb9c822" class="">Calculates the track normal as the cross product between the (unit) vectors from the perturbed points (in the order Y cross X such that the normal points in positive z)</p></div></div></article><span class="sans" style="font-size:14px;padding-top:2em"></span></body></html>